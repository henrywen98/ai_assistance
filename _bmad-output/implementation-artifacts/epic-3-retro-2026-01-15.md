# Epic 3 回顾 - 容器管理与展示

**日期:** 2026-01-15
**Epic:** Epic 3 - 容器管理与展示
**状态:** 标记完成 (7/7 Stories)，但大部分功能不工作

---

## Epic 概览

| 指标 | 值 |
|------|-----|
| Stories 完成 | 7/7 (100%) - 标记状态 |
| 实际可用 | 1/7 (14%) - 只有笔记基本工作 |
| 目标 | 用户可浏览、编辑、管理三大容器中的内容 |
| FRs 覆盖 | FR3.1-FR3.4, FR5.4 |

---

## Stories 实际状态

| Story | 功能 | 标记 | 实际 | 问题 |
|-------|------|------|------|------|
| 3-1 | 捕获列表视图 | done | ⚠️ 部分 | 详情不更新、内容不可编辑、多选UX混乱 |
| 3-2 | 日历 CRUD | done | 🔴 不工作 | 转换流程断、界面混乱、时间线不直观 |
| 3-3 | Todo CRUD | done | 🔴 不工作 | 转换流程断、视图为空 |
| 3-4 | 笔记 CRUD | done | ✅ 基本工作 | 列表点击跳顶部 bug |
| 3-5 | 跨容器转化 | done | 🔴 不工作 | 手动转换无效 |
| 3-6 | 批量处理 | done | 🔴 不工作 | 无法多选、无 checkbox |
| 3-7 | 菜单栏徽章 | done | 🔴 不工作 | 无数字显示 |

---

## 核心问题分析

### 🔴 系统性问题：转换流程断裂

```
捕获箱状态：
├── 项目A: container = .calendar  ──✗──→ 日历视图 (空)
├── 项目B: container = .todo      ──✗──→ 待办视图 (空)
└── 项目C: container = .note      ──✓──→ 笔记视图 (有内容)
```

**根因：** ContainerConversionService 对日历和待办只修改了 CaptureItem 的 container 标签，没有真正创建 CalendarEvent 和 TodoItem 实体。

### 为什么笔记能工作？

需要检查代码，可能：
1. 笔记的转换逻辑不同
2. 笔记视图直接读取 CaptureItem 而非 Note 实体
3. 笔记有额外的同步逻辑

---

## 详细问题清单

### 捕获列表视图 (3-1)

1. **右侧详情不更新** - 点击列表项，右侧有时不显示对应内容
2. **内容不可编辑** - 用户应该能修改捕获内容
3. **缺少"推荐分类"字段** - AI 分析应显示推荐的容器类型
4. **多选模式 UX 混乱** - 点击多选后列表无视觉变化，不知道如何退出
5. **工具栏文件夹图标重复** - 下拉菜单和右键菜单功能重复

### 日历视图 (3-2)

1. **捕获箱无法转存到日历** - 核心流程断裂
2. **界面布局混乱** - 整体设计需要优化
3. **时间线概念不直观** - "过去·成就/现在·今日/未来·安心" 过于抽象
4. **右侧详情文字密集** - 应更视觉化

### 待办视图 (3-3)

1. **视图为空** - 捕获箱有待办项但待办视图看不到

### 笔记视图 (3-4)

1. **列表点击跳顶部** - 单击就触发列表重排到顶部

### 批量处理 (3-6)

1. **无法选中多个项目** - 多选功能完全不工作
2. **没有 checkbox** - 无视觉指示

### 菜单栏徽章 (3-7)

1. **无数字显示** - 功能未实现

---

## Action Items

| # | 改进项 | 优先级 | 负责人 | 状态 |
|---|--------|--------|--------|------|
| 1 | 修复日历/待办转换流程 (ContainerConversionService) | 🔴 最高 | Dev | 待办 |
| 2 | 修复批量处理多选功能 | 🔴 高 | Dev | 待办 |
| 3 | 修复捕获列表详情不更新 | 🔴 高 | Dev | 待办 |
| 4 | 添加菜单栏徽章显示未处理数量 | 🟡 中 | Dev | 待办 |
| 5 | 修复笔记列表点击跳顶部 bug | 🟡 中 | Dev | 待办 |
| 6 | 捕获内容可编辑功能 | 🟡 中 | Dev | 待办 |
| 7 | 重新设计日历时间线界面 | 🟡 中 | Dev/UX | 待办 |
| 8 | 简化工具栏重复功能 | 🟡 低 | Dev | 待办 |
| 9 | 多选模式增加视觉反馈 (checkbox) | 🟡 中 | Dev | 待办 |
| 10 | AI分析增加"推荐分类"字段显示 | 🟡 中 | Dev | 待办 |

---

## 关键洞察

1. **Story 完成标准严重不足** - 7个 Story 标记完成，实际只有1个基本可用
2. **缺乏端到端测试** - 转换流程从未被完整验证过
3. **数据流设计问题** - CaptureItem 标签与实际实体创建脱节
4. **UX 测试缺失** - 多选、徽章等交互功能未经用户验证

---

## 下一步

1. **最优先：修复 ContainerConversionService** - 确保转换真正创建实体
2. **验证数据流** - CaptureItem → CalendarEvent/TodoItem/Note 的完整路径
3. **增加集成测试** - 端到端验证转换流程
4. **UX 审查** - 重新评估日历时间线等界面设计

---

*回顾参与者: Henry (Project Lead), Alice (Product Owner), Bob (Scrum Master), Charlie (Senior Dev), Dana (QA Engineer)*
